/*! 2018-12-04_15:41:46 sem.am@ctrip.com */
!function(win,doc){var _utils={setCooki:function(e,t,o){var i=o||90,n=new Date,r=t;n.setTime(n.getTime()+24*i*60*60*1e3),document.cookie=e+"="+r+";path=/;expires="+n.toUTCString()+";domain="+window.location.hostname.split(".").slice(-2).join(".")||"ctrip.com"},getCooki:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},createScript:function(e,t){var o=document.createElement("script");o.type="text/javascript",o.async=t,o.charset="UTF-8",o.src=e;var i=document.getElementsByTagName("head")[0];i.appendChild(o)},Ajax:{obj:function(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw"您的浏览器不支持AJAX"}return!1}}return e}(),httpSuccess:function(e){return e.status>=200&&e.status<300||304==e.status},serialize:function(e){var t=[];if(e){for(var o in e)t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")}},submitRequest:function(e){if(e){var t=this,o=t.obj;o.onreadystatechange=function(){4==o.readyState&&(t.httpSuccess(o)&&o.responseText?"function"==typeof e.success&&e.success(o.responseText):"function"==typeof e.error&&e.error(o.responseText))},o.open(e.type,e.url,e.async||!0),o.setRequestHeader("Content-type",e.contentType||"text/plain; charset=UTF-8"),e.withCredentials?(o.withCredentials=!0,o.setRequestHeader("cookieOrigin",window.location.origin)):o.withCredentials=!1,o.send(e.param)}}},getSoaDomain:function(){var e="",t=document.location.host,o=!!t.match("fat"),i=!!t.match("uat");return e=o?"mkt.ctrip.fat401.qa.nt.ctripcorp.com/":i?"mkt.ctrip.uat.qa.nt.ctripcorp.com/":"mkt.ctrip.com/"}},setNewCookie=function(){var _record=eval(decodeURIComponent(_utils.getCooki("Mkt_UnionRecord")))||[],_tempRecord=[],union=_utils.getCooki("Union");if(union&&union.indexOf("AllianceID=")>-1){var aid=union.split("AllianceID=")[1].split("&")[0],timestamp=(new Date).getTime(),flag=!1,deleteindex="";if(_record){for(var i=0;i<_record.length;i++)_record[i].aid&&(timestamp-_record[i].timestamp)/864e5<30&&_tempRecord.push(_record[i]);_record=_tempRecord}aid&&_record&&_record.forEach(function(e,t,o){aid==o[t].aid&&(flag=!0,deleteindex=t)});var new_union={aid:aid,timestamp:timestamp};flag&&_record.splice(deleteindex,1),_record.length<10?aid&&union&&_record.push(new_union):(_record[0]&&_record.shift(),union&&_record.push(new_union)),_utils.setCooki("Mkt_UnionRecord",encodeURIComponent(JSON.stringify(_record)),90)}},postRecord=function(e){if(e&&e.orderid&&e.price+""&&e.ordertype){var t=e.orderid,o=e.price,i=e.ordertype,n="",r=/(iphone|ios|android|mini|mobile|mobi|Nokia|Symbian|iPod|iPad|Windows\s+Phone|MQQBrowser|wp7|wp8|UCBrowser7|UCWEB|360\s+Aphone\s+Browser|AppleWebKit.*Mobile)/i.test(navigator.userAgent);n=r?"h5":"pc",apiRequest="https://"+_utils.getSoaDomain()+"order-monitor/getorderinfo?orderid="+t+"&ordertype="+i+"&price="+o+"&pagesource="+n+"&callback=Mkt_UnionRecord._callAdeqoEvent",_utils.createScript(apiRequest)}},callAdeqoEvent=function(e){try{if(e&&200==e.code&&e.urlList&&e.urlList.length>0)for(var t=0,o=e.urlList.length;t<o;t++){var i=new Image,n=doc.createElement("div");n.style.display="none",i.src=e.urlList[t],n.appendChild(i),doc.getElementsByTagName("body")[0].appendChild(n)}}catch(r){window.__bfi.push(["_tracklog","Remarketing_interface_adeqo",r.toString()])}},init=function(){setNewCookie(),win.Mkt_UnionRecord={postRecord:postRecord,_callAdeqoEvent:callAdeqoEvent}};init()}(window,document);